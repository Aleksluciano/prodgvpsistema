(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{a9oU:function(e,t,o){"use strict";o.d(t,"c",function(){return s}),o.d(t,"a",function(){return d}),o.d(t,"d",function(){return c}),o.d(t,"b",function(){return h});var i=o("CcnG"),n=o("t/Na"),r=o("Ip0R"),s=function(){function e(e,t){this.http=e,this._document=t}return e.prototype.executeCommand=function(e){["h1","h2","h3","h4","h5","h6","p","pre"].includes(e)&&this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)},e.prototype.createLink=function(e){e.includes("http")?this.insertHtml('<a href="'+e+'" target="_blank">'+this.selectedText+"</a>"):this._document.execCommand("createlink",!1,e)},e.prototype.insertColor=function(e,t){this.restoreSelection()&&this._document.execCommand("textColor"===t?"foreColor":"hiliteColor",!1,e)},e.prototype.setFontName=function(e){this._document.execCommand("fontName",!1,e)},e.prototype.setFontSize=function(e){this._document.execCommand("fontSize",!1,e)},e.prototype.insertHtml=function(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")},e.prototype.saveSelection=function(){if(window.getSelection){var e=window.getSelection();e.getRangeAt&&e.rangeCount&&(this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString())}else this.savedSelection=this._document.getSelection&&this._document.createRange?document.createRange():null},e.prototype.restoreSelection=function(){if(!this.savedSelection)return!1;if(window.getSelection){var e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0},e.prototype.checkSelection=function(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0},e.prototype.uploadImage=function(e){var t=new FormData;return t.append("file",e,e.name),this.http.post(this.uploadUrl,t,{reportProgress:!0,observe:"events"})},e.prototype.insertImage=function(e){this._document.execCommand("insertImage",!1,e)},e.prototype.setDefaultParagraphSeparator=function(e){this._document.execCommand("defaultParagraphSeparator",!1,e)},e.prototype.createCustomClass=function(e){var t=e.tag?e.tag:"span";this.insertHtml("<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">")},e.ngInjectableDef=Object(i.defineInjectable)({factory:function(){return new e(Object(i.inject)(n.c),Object(i.inject)(r.DOCUMENT))},token:e,providedIn:"root"}),e}(),a={editable:!0,spellcheck:!0,height:"auto",minHeight:"0",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",uploadUrl:"v1/image"},c=function(){function e(e,t,o){this._renderer=e,this.editorService=t,this._document=o,this.id="",this.htmlMode=!1,this.showToolbar=!0,this.block="default",this.fontName="Arial",this.fontSize="5",this.customClassId=-1,this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"],this.buttons=["bold","italic","underline","strikeThrough","subscript","superscript","justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent","insertUnorderedList","insertOrderedList","link"],this.execute=new i.EventEmitter}return e.prototype.triggerCommand=function(e){this.execute.emit(e)},e.prototype.triggerButtons=function(){var e=this;this.showToolbar&&this.buttons.forEach(function(t){var o=e._document.queryCommandState(t),i=e._document.getElementById(t+"-"+e.id);o?e._renderer.addClass(i,"active"):e._renderer.removeClass(i,"active")})},e.prototype.triggerBlocks=function(e){var t=this;if(this.showToolbar){var o=!1;this.select.forEach(function(i){var n=e.find(function(e){return e.nodeName===i});void 0!==n&&i===n.nodeName?!1===o&&(t.block=n.nodeName.toLowerCase(),o=!0):!1===o&&(t.block="default")}),o=!1,this.customClasses&&this.customClasses.forEach(function(i,n){void 0!==e.find(function(e){if(e instanceof Element)return e.className===i.class})?!1===o&&(t.customClassId=n,o=!0):!1===o&&(t.customClassId=-1)}),Object.keys(this.tagMap).map(function(o){var i=t._document.getElementById(t.tagMap[o]+"-"+t.id),n=e.find(function(e){return e.nodeName===o});void 0!==n&&o===n.nodeName?t._renderer.addClass(i,"active"):t._renderer.removeClass(i,"active")})}},e.prototype.insertUrl=function(){var e=prompt("Insert URL link","http://");e&&""!==e&&"http://"!==e&&this.editorService.createLink(e)},e.prototype.insertColor=function(e,t){this.editorService.insertColor(e,t),this.execute.emit("")},e.prototype.setFontName=function(e){this.editorService.setFontName(e),this.execute.emit("")},e.prototype.setFontSize=function(e){this.editorService.setFontSize(e),this.execute.emit("")},e.prototype.setEditorMode=function(e){var t=this._document.getElementById("toggleEditorMode-"+this.id);e?this._renderer.addClass(t,"active"):this._renderer.removeClass(t,"active"),this.htmlMode=e},e.prototype.onFileChanged=function(e){var t=this,o=e.target.files[0];o.type.includes("image/")&&this.editorService.uploadImage(o).subscribe(function(e){e instanceof n.g&&(t.editorService.insertImage(e.body.imageUrl),t.fileReset())})},e.prototype.fileReset=function(){this.myInputFile.nativeElement.value=""},e.prototype.setCustomClass=function(e){this.editorService.createCustomClass(this.customClasses[e])},e}(),d=function(){function e(e,t,o){this._renderer=e,this.editorService=t,this._document=o,this.modeVisual=!0,this.showPlaceholder=!1,this.id="",this.config=a,this.viewMode=new i.EventEmitter,this.blur=new i.EventEmitter,this.focus=new i.EventEmitter}return e.prototype.ngOnInit=function(){this.editorToolbar.id=this.id,this.editorToolbar.customClasses=this.config.customClasses,this.editorService.uploadUrl=this.config.uploadUrl,void 0!==this.config.showToolbar&&(this.editorToolbar.showToolbar=this.config.showToolbar),this.config.defaultParagraphSeparator&&this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator)},e.prototype.ngAfterContentInit=function(){this.config.defaultFontName&&(this.editorToolbar.fontName=this.config.defaultFontName,this.onEditorFocus(),this.editorService.setFontName(this.config.defaultFontName)),this.config.defaultFontSize&&(this.editorToolbar.fontSize=this.config.defaultFontSize,this.onEditorFocus(),this.editorService.setFontSize(this.config.defaultFontSize))},e.prototype.executeCommand=function(e){"toggleEditorMode"===e?this.toggleEditorMode(this.modeVisual):""!==e&&(this.editorService.executeCommand(e),this.exec()),this.onEditorFocus()},e.prototype.onTextAreaFocus=function(){this.focus.emit("focus")},e.prototype.onTextAreaBlur=function(){this.editorService.saveSelection(),"function"==typeof this.onTouched&&this.onTouched(),this.blur.emit("blur")},e.prototype.onEditorFocus=function(){this.textArea.nativeElement.focus()},e.prototype.onContentChange=function(e){"function"==typeof this.onChange&&(this.onChange(e),(!e||"<br>"===e||""===e)!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder))},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){(!e||"<br>"===e||""===e)!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder),null!=e&&""!==e&&"<br>"!==e||(e=null),this.refreshView(e)},e.prototype.refreshView=function(e){this._renderer.setProperty(this.textArea.nativeElement,"innerHTML",null===e?"":e)},e.prototype.togglePlaceholder=function(e){e?(this._renderer.removeClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!1):(this._renderer.addClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!0)},e.prototype.setDisabledState=function(e){this._renderer[e?"addClass":"removeClass"](this.textArea.nativeElement,"disabled")},e.prototype.toggleEditorMode=function(e){var t,o=this.textArea.nativeElement;if(e){t=this._document.createTextNode(o.innerHTML),o.innerHTML="";var i=this._document.createElement("pre");i.setAttribute("style","margin: 0; outline: none;");var n=this._document.createElement("code");o.contentEditable=!1,n.id="sourceText",n.setAttribute("style","white-space: pre-wrap; word-break: keep-all; margin: 0; outline: none; background-color: #fff5b9;"),n.contentEditable="true",n.appendChild(t),i.appendChild(n),o.appendChild(i),this._document.execCommand("defaultParagraphSeparator",!1,"div"),this.modeVisual=!1,this.viewMode.emit(!1),n.focus()}else this._document.all?o.innerHTML=o.innerText:((t=this._document.createRange()).selectNodeContents(o.firstChild),o.innerHTML=t.toString()),o.contentEditable=!0,this.modeVisual=!0,this.viewMode.emit(!0),this.onContentChange(o.innerHTML),o.focus();this.editorToolbar.setEditorMode(!this.modeVisual)},e.prototype.exec=function(){var e;this.editorToolbar.triggerButtons(),window.getSelection&&(e=window.getSelection());for(var t=e.focusNode,o=[];t&&"editor"!==t.id;)o.unshift(t),t=t.parentNode;this.editorToolbar.triggerBlocks(o)},e}(),h=function(){return function(){}}()}}]);